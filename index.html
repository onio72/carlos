<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Recursos para Carlos - 1¬∫ ESO</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --primary:#667eea;--primary-dark:#5a67d8;--secondary:#764ba2;--accent:#f093fb;
      --bg-light:#f7fafc;--bg-white:#ffffff;--text-dark:#2d3748;--text-light:#718096;
      --shadow:0 10px 25px rgba(0,0,0,0.1);--shadow-hover:0 20px 40px rgba(0,0,0,0.15);
      --border-radius:16px
    }
    body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;color:var(--text-dark);line-height:1.6}
    .hero{text-align:center;padding:3rem 1rem;color:#fff;position:relative;overflow:hidden}
    .hero::before{content:'';position:absolute;inset:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="%23ffffff" fill-opacity="0.1"/><circle cx="75" cy="75" r="1" fill="%23ffffff" fill-opacity="0.08"/><circle cx="50" cy="10" r="0.5" fill="%23ffffff" fill-opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');opacity:.3}
    .hero-content{position:relative;z-index:1}
    .hero h1{font-size:3rem;font-weight:700;margin-bottom:1rem;text-shadow:0 4px 20px rgba(0,0,0,0.3);animation:fadeInUp 1s ease-out}
    .hero p{font-size:1.2rem;font-weight:300;opacity:.9;animation:fadeInUp 1s ease-out .2s both}
    .container{max-width:1200px;margin:0 auto;padding:0 1rem}
    .subjects-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:2rem;margin:-50px 1rem 3rem;position:relative;z-index:2}
    .subject-card{background:var(--bg-white);border-radius:var(--border-radius);box-shadow:var(--shadow);overflow:hidden;transition:all .4s cubic-bezier(.175,.885,.32,1.275);position:relative;animation:fadeInUp .6s ease-out}
    .subject-card:hover{transform:translateY(-10px);box-shadow:var(--shadow-hover)}
    .subject-header{padding:2rem;background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;position:relative;overflow:hidden}
    .subject-header::before{content:'';position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);transition:transform .6s ease}
    .subject-card:hover .subject-header::before{transform:scale(1.2) rotate(45deg)}
    .subject-icon{font-size:3rem;margin-bottom:1rem;display:block}
    .subject-title{font-size:1.5rem;font-weight:600;margin-bottom:.5rem}
    .subject-subtitle{font-size:.9rem;opacity:.8;font-weight:300}
    .subject-content{padding:2rem}
    .topic-section{margin-bottom:2rem}
    .topic-title{font-size:1.1rem;font-weight:500;color:var(--primary);margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}
    .topic-title::before{content:'üìö';font-size:1.2rem}
    .resources-list{list-style:none;display:flex;flex-direction:column;gap:.75rem}
    .resource-link{display:flex;align-items:center;padding:1rem;background:var(--bg-light);border-radius:12px;text-decoration:none;color:var(--text-dark);transition:all .3s ease;border:2px solid transparent;position:relative;overflow:hidden}
    .resource-link::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(102,126,234,.1),transparent);transition:left .6s ease}
    .resource-link:hover::before{left:100%}
    .resource-link:hover{transform:translateX(8px);background:#fff;border-color:var(--primary);box-shadow:0 5px 15px rgba(102,126,234,.2)}
    .resource-icon{font-size:1.5rem;margin-right:1rem;transition:transform .3s ease}
    .resource-link:hover .resource-icon{transform:scale(1.2) rotate(5deg)}
    .resource-text{flex:1}
    .resource-title{font-weight:500;color:var(--text-dark);margin-bottom:.25rem}
    .resource-description{font-size:.85rem;color:var(--text-light)}
    .floating-nav{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%);background:#fff;border-radius:50px;box-shadow:var(--shadow);padding:.5rem;display:flex;gap:.5rem;z-index:1000;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}
    .nav-item{display:flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:50%;background:var(--bg-light);color:var(--primary);text-decoration:none;font-size:1.2rem;transition:all .3s ease;position:relative}
    .nav-item:hover{background:var(--primary);color:#fff;transform:scale(1.1)}
    .nav-item.active{background:var(--primary);color:#fff}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
    .subject-card:nth-child(1){animation-delay:.1s}.subject-card:nth-child(2){animation-delay:.2s}.subject-card:nth-child(3){animation-delay:.3s}.subject-card:nth-child(4){animation-delay:.4s}.subject-card:nth-child(5){animation-delay:.5s}
    @media (max-width:768px){
      .hero h1{font-size:2rem}
      .subjects-grid{grid-template-columns:1fr;margin:-30px 1rem 2rem}
      .floating-nav{bottom:1rem;padding:.25rem}
      .nav-item{width:40px;height:40px;font-size:1rem}
    }
  </style>
</head>
<body>
  <section class="hero">
    <div class="hero-content">
      <h1>Recursos para Carlos</h1>
      <p>1¬∫ ESO - Portal de aprendizaje interactivo</p>
    </div>
  </section>

  <div class="container">
    <div id="subjects" class="subjects-grid"><!-- Render din√°mico --></div>
  </div>

  <nav id="nav" class="floating-nav"><!-- Render din√°mico --></nav>

  <script>
    /* ============================
       1) CONTENIDO EDITABLE (DATA)
       ============================ */
    const DATA = {
      categories: [
        {
          id: "geografia",
          icon: "üåç",
          title: "Geograf√≠a e Historia",
          subtitle: "Explora el mundo y su historia",
          topics: [
            {
              title: "Tema 1",
              resources: [
                {
                  title: "Continentes y oc√©anos",
                  description: "Aprende la geograf√≠a mundial",
                  url: "https://onio72.github.io/carlos/gh1/continentes/",
                  icon: "üó∫Ô∏è"
                }
              ]
            }
          ]
        },
        {
          id: "matematicas",
          icon: "üî¢",
          title: "Matem√°ticas",
          subtitle: "Descubre la l√≥gica de los n√∫meros",
          topics: [
            {
              title: "Tema 1",
              resources: [
                {
                  title: "F√≥rmula emp√≠rica",
                  description: "Conceptos matem√°ticos b√°sicos",
                  url: "https://onio72.github.io/iesmajuelo/bach/fq1/formulaempirica/",
                  icon: "üßÆ"
                }
              ]
            }
          ]
        },
        {
          id: "lengua",
          icon: "üìö",
          title: "Lengua Castellana",
          subtitle: "Domina el arte de la comunicaci√≥n",
          topics: [
            {
              title: "Ortograf√≠a",
              resources: [
                {
                  title: "Repositorio de p√≠ldoras",
                  description: "Recursos educativos variados",
                  url: "https://onio72.github.io/cdd/",
                  icon: "üíä"
                }
              ]
            }
            {
              title: "Tema 1",
              resources: [
                {
                  title: "Repositorio de p√≠ldoras",
                  description: "Recursos educativos variados",
                  url: "https://onio72.github.io/cdd/",
                  icon: "üíä"
                }
              ]
            }
            {
              title: "Tema 1",
              resources: [
                {
                  title: "Repositorio de p√≠ldoras",
                  description: "Recursos educativos variados",
                  url: "https://onio72.github.io/cdd/",
                  icon: "üíä"
                }
              ]
            }
            {
              title: "Tema 1",
              resources: [
                {
                  title: "Repositorio de p√≠ldoras",
                  description: "Recursos educativos variados",
                  url: "https://onio72.github.io/cdd/",
                  icon: "üíä"
                }
              ]
            }
            {
              title: "Tema 1",
              resources: [
                {
                  title: "Repositorio de p√≠ldoras",
                  description: "Recursos educativos variados",
                  url: "https://onio72.github.io/cdd/",
                  icon: "üíä"
                }
              ]
            }
            {
              title: "Tema 1",
              resources: [
                {
                  title: "Repositorio de p√≠ldoras",
                  description: "Recursos educativos variados",
                  url: "https://onio72.github.io/cdd/",
                  icon: "üíä"
                }
              ]
            }
          ]
        },
        {
          id: "biologia",
          icon: "üß¨",
          title: "Biolog√≠a y Geolog√≠a",
          subtitle: "Explora la vida y la Tierra",
          topics: [
            {
              title: "Tema 1",
              resources: [
                {
                  title: "Calendario",
                  description: "Organiza tu tiempo de estudio",
                  url: "https://onio72.github.io/ed/calendario.html",
                  icon: "üìÖ"
                }
              ]
            }
          ]
        },
        {
          id: "ingles",
          icon: "üá¨üáß",
          title: "Ingl√©s",
          subtitle: "Conecta con el mundo",
          topics: [
            {
              title: "Tema 1",
              resources: [
                {
                  title: "Reparto materias",
                  description: "Organizaci√≥n acad√©mica",
                  url: "https://onio72.github.io/iesmajuelo/departamentoFQ/index2.html",
                  icon: "üìã"
                }
              ]
            }
          ]
        }
      ]
    };

    /* =================================
       2) RENDER: TARJETAS + NAV DIN√ÅMICO
       ================================= */
    const $subjects = document.getElementById('subjects');
    const $nav = document.getElementById('nav');

    function el(tag, attrs = {}, children = []) {
      const node = document.createElement(tag);
      for (const [k, v] of Object.entries(attrs)) {
        if (k === 'class') node.className = v;
        else if (k === 'html') node.innerHTML = v;
        else node.setAttribute(k, v);
      }
      (Array.isArray(children) ? children : [children]).forEach(c => {
        if (c == null) return;
        node.appendChild(typeof c === 'string' ? document.createTextNode(c) : c);
      });
      return node;
    }

    function renderResource(res) {
      return el('li', {}, el('a', {href: res.url, target: "_blank", class: "resource-link", rel:"noopener noreferrer"},
        [
          el('span', {class: "resource-icon"}, res.icon || 'üîó'),
          el('div', {class: "resource-text"}, [
            el('div', {class: "resource-title"}, res.title),
            el('div', {class: "resource-description"}, res.description || '')
          ])
        ]
      ));
    }

    function renderTopic(topic) {
      return el('div', {class: "topic-section"}, [
        el('h3', {class: "topic-title"}, topic.title),
        el('ul', {class: "resources-list"},
          (topic.resources || []).map(renderResource)
        )
      ]);
    }

    function renderCategory(cat, index) {
      return el('div', {class: "subject-card", id: cat.id}, [
        el('div', {class: "subject-header"}, [
          el('span', {class: "subject-icon"}, cat.icon || 'üì¶'),
          el('h2', {class: "subject-title"}, cat.title),
          el('p', {class: "subject-subtitle"}, cat.subtitle || '')
        ]),
        el('div', {class: "subject-content"},
          (cat.topics || []).map(renderTopic)
        )
      ]);
    }

    function renderNavItem(cat) {
      const a = el('a', {href: `#${cat.id}`, class: "nav-item", title: cat.title}, cat.icon || 'üì¶');
      a.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(a.getAttribute('href'));
        if (target) target.scrollIntoView({behavior: 'smooth', block: 'center'});
      });
      return a;
    }

    function renderAll() {
      // Tarjetas
      $subjects.innerHTML = '';
      DATA.categories.forEach((cat, i) => $subjects.appendChild(renderCategory(cat, i)));

      // Nav
      $nav.innerHTML = '';
      DATA.categories.forEach(cat => $nav.appendChild(renderNavItem(cat)));

      // Observador para activar nav seg√∫n scroll
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const navItem = $nav.querySelector(`[href="#${entry.target.id}"]`);
            if (navItem) {
              $nav.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
              navItem.classList.add('active');
            }
          }
        });
      }, {threshold: 0.3, rootMargin: '-50px 0px'});

      document.querySelectorAll('.subject-card').forEach(card => observer.observe(card));

      // Hover suave
      document.querySelectorAll('.subject-card').forEach(card => {
        card.addEventListener('mouseenter', () => card.style.transform = 'translateY(-10px) scale(1.02)');
        card.addEventListener('mouseleave', () => card.style.transform = 'translateY(0) scale(1)');
      });
    }

    renderAll();

    /* =======================================================
       3) OPCIONAL: Cargar DATA desde data.json en producci√≥n
       -------------------------------------------------------
       - Crea un archivo data.json con la misma estructura que DATA.
       - Descomenta el bloque fetch() de abajo y comenta el DATA hardcoded.
       - Sirve los archivos con un servidor (fetch no funciona en file://).
    ======================================================== */
    // fetch('./data.json')
    //   .then(r => r.json())
    //   .then(json => { Object.assign(DATA, json); renderAll(); })
    //   .catch(err => console.warn('Usando DATA embebido. Error al cargar data.json:', err));
  </script>
</body>
</html>
