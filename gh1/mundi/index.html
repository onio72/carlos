
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Juego de Mapa Mundi: Acc. Geográficos (v2)</title>
  <style>
    body {
        font-family: sans-serif;
        background-color: #f4f4f9;
        color: #333;
        margin: 0;
        padding: 10px;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    header {
        margin-bottom: 10px;
    }

    h1 {
        color: #0056b3;
    }

    #scoreboard {
        font-size: 1.2em;
        font-weight: bold;
        margin-bottom: 10px;
        padding: 5px 15px;
        border: 1px solid #ddd;
        display: inline-block;
        background-color: #fff;
        border-radius: 5px;
    }

    #game-container {
        display: flex;
        flex-direction: column;
        width: 95%;
        max-width: 1280px;
        margin-bottom: 20px;
    }

    #map-container {
        position: relative;
        width: 100%;
        padding-top: 50%;
        border: 2px solid #ccc;
        background-color: #e0f7fa;
        overflow: hidden;
    }

    #world-map {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    #labels-container {
        width: 100%;
        margin-bottom: 20px;
    }

    #draggable-labels {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 8px;
        padding: 10px;
        border: 1px solid #aaa;
        border-radius: 5px;
        background-color: #fff;
    }

    .draggable-label {
        width: 30px;
        height: 30px;
        line-height: 30px;
        background-color: #3f51b5;
        color: white;
        border-radius: 50%;
        text-align: center;
        font-weight: bold;
        font-size: 1em;
        cursor: grab;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        transition: transform 0.1s;
        display: block;
    }

    .draggable-label:active {
        cursor: grabbing;
        transform: scale(1.1);
    }

    .hidden {
        opacity: 0;
    }

    .drop-zone {
        position: absolute;
        width: 20px;
        height: 20px;
        border: 1px dashed rgba(0, 0, 0, 0.4);
        background-color: rgba(255, 255, 0, 0.1);
        box-sizing: border-box;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10;
        transition: background-color 0.3s;
    }

    .peak-icon {
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 6px solid red;
        transform: translate(-50%, -100%);
        z-index: 12;
    }

    .peak-icon-double {
        position: absolute;
        top: 0;
        left: 0;
        width: 1px;
        height: 1px;
        transform: translate(-50%, 0%);
    }

    .peak-icon-double::before,
    .peak-icon-double::after {
        content: '';
        position: absolute;
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 6px solid red;
        z-index: 12;
    }

    .peak-icon-double::before {
        transform: translate(calc(-100% - 1px), -95%);
        z-index: 11;
    }

    .peak-icon-double::after {
        transform: translate(1px, -100%);
        z-index: 12;
    }

    .drop-zone.correct {
        background-color: rgba(76, 175, 80, 0.7);
        border: 2px solid #4CAF50;
    }

    .drop-zone.incorrect {
        background-color: rgba(244, 67, 54, 0.7);
        border: 2px solid #f44336;
    }

    .placed-label {
        background-color: #0056b3;
        color: white;
        font-size: 0.8em;
        font-weight: bold;
        border-radius: 50%;
        width: 100%;
        height: 100%;
        line-height: 18px;
        text-align: center;
        pointer-events: none;
    }

    #tables-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        gap: 20px;
        width: 100%;
        max-width: 1280px;
        margin-top: 20px;
    }

    .continent-table {
        flex: 1 1 300px;
        margin: 5px;
        border: 1px solid #ccc;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .continent-table h3 {
        background-color: #0056b3;
        color: white;
        padding: 10px;
        margin: 0;
        text-align: left;
    }

    .continent-table table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.9em;
    }

    .continent-table th, .continent-table td {
        padding: 6px 10px;
        text-align: left;
    }

    .continent-table tr:nth-child(even) {
        background-color: #f2f2f2;
    }

    .continent-table .num {
        width: 10%;
        font-weight: bold;
        text-align: center;
        background-color: #e0f7fa;
    }

    .controls {
        margin-top: 20px;
    }

    button {
        padding: 10px 20px;
        font-size: 1em;
        margin: 0 10px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

    #check-btn {
        background-color: #4CAF50;
        color: white;
    }

    #check-btn:hover {
        background-color: #45a049;
    }

    #reset-btn {
        background-color: #f44336;
        color: white;
    }

    #reset-btn:hover {
        background-color: #da190b;
    }
  </style>
</head>
<body>
  <header>
    <h1>Ubica los Accidentes Geográficos</h1>
    <p>Arrastra el número de la lista al punto correcto en el mapa. Las zonas con <strong>pico único</strong> muestran un triángulo rojo; las de <strong>cordillera</strong>, doble pico.</p>
  </header>

  <section id="scoreboard">
    Puntuación: <span id="score">0</span>
  </section>

  <div id="game-container">
    <div id="labels-container">
        <h2>Números a Arrastrar</h2>
        <div id="draggable-labels"></div>
    </div>

    <div id="map-container">
      <img src="world_map.png" alt="Mapa mundi" id="world-map">
      <!-- Las dropzones se generan dinámicamente -->
    </div>
  </div>

  <div class="controls">
    <button id="check-btn">Comprobar</button>
    <button id="reset-btn">Reiniciar</button>
  </div>

  <div id="tables-container"></div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const dropzoneData = [
            {"continent":"AMÉRICA","name":"Montañas Rocosas","left":16.5,"top":22,"icon":"double"},
            {"continent":"AMÉRICA","name":"Montes Apalaches","left":26.5,"top":29,"icon":"double"},
            {"continent":"AMÉRICA","name":"Cordillera de los Andes","left":27,"top":50,"icon":"double"},
            {"continent":"AMÉRICA","name":"Escudo Canadiense","left":21,"top":17,"icon":"double"},
            {"continent":"AMÉRICA","name":"Aconcagua","left":29,"top":66,"icon":"single"},
            {"continent":"AMÉRICA","name":"Macizo de las Guayanas","left":33,"top":45,"icon":"double"},
            {"continent":"AMÉRICA","name":"Meseta Brasileña","left":35,"top":55,"icon":"double"},
            {"continent":"AMÉRICA","name":"Cuenca del Amazonas","left":31,"top":50},
            {"continent":"AMÉRICA","name":"Península de Alaska","left":10,"top":14},
            {"continent":"AMÉRICA","name":"Península del Labrador","left":32,"top":18},
            {"continent":"AMÉRICA","name":"Península de Florida","left":26.5,"top":33},
            {"continent":"AMÉRICA","name":"Península de California","left":18,"top":34},
            {"continent":"AMÉRICA","name":"Tierra de Fuego","left":29,"top":77},
            {"continent":"AMÉRICA","name":"Cabo de Hornos","left":30,"top":81},
            {"continent":"AMÉRICA","name":"Desierto de Atacama","left":30.5,"top":59},
            {"continent":"ÁFRICA","name":"Montes Atlas","left":48,"top":32,"icon":"double"},
            {"continent":"ÁFRICA","name":"Montes Drakensberg","left":57,"top":65,"icon":"double"},
            {"continent":"ÁFRICA","name":"Macizo Etíopico","left":60,"top":43,"icon":"double"},
            {"continent":"ÁFRICA","name":"Macizo de Ahaggar","left":51,"top":38,"icon":"double"},
            {"continent":"ÁFRICA","name":"Kilimanjaro","left":58.5,"top":53,"icon":"single"},
            {"continent":"ÁFRICA","name":"Meseta del Lago Victoria","left":58.5,"top":46.5},
            {"continent":"ÁFRICA","name":"Cuenca del Chad","left":54.5,"top":42},
            {"continent":"ÁFRICA","name":"Rift Valley","left":58.5,"top":50},
            {"continent":"ÁFRICA","name":"Cabo de Buena Esperanza","left":55,"top":68},
            {"continent":"ÁFRICA","name":"Cabo Verde","left":44,"top":40.5},
            {"continent":"ASIA","name":"Cordillera del Himalaya","left":75,"top":30,"icon":"double"},
            {"continent":"ASIA","name":"Everest","left":74,"top":33,"icon":"single"},
            {"continent":"ASIA","name":"Meseta del Tibet","left":73,"top":26},
            {"continent":"ASIA","name":"Meseta de Irán","left":65,"top":29.5},
            {"continent":"ASIA","name":"Gran Meseta de Siberia Central","left":67,"top":22},
            {"continent":"ASIA","name":"Gran Llanura de Siberia Occidental","left":61,"top":21},
            {"continent":"ASIA","name":"Península de Indochina","left":78,"top":40.5},
            {"continent":"ASIA","name":"Península de Corea","left":84.5,"top":28},
            {"continent":"ASIA","name":"Mar Caspio","left":63.5,"top":26.5},
            {"continent":"ASIA","name":"Mar Muerto","left":59,"top":24.5},
            {"continent":"EUROPA","name":"Montes Urales","left":63.5,"top":17,"icon":"double"},
            {"continent":"EUROPA","name":"Macizo Central Francés","left":51,"top":25,"icon":"double"},
            {"continent":"EUROPA","name":"Montes Escandinavos","left":53,"top":13,"icon":"double"},
            {"continent":"EUROPA","name":"Alpes","left":52.5,"top":22.5,"icon":"double"},
            {"continent":"EUROPA","name":"Pirineos","left":50,"top":26,"icon":"double"},
            {"continent":"EUROPA","name":"Cárpatos","left":56,"top":23,"icon":"double"},
            {"continent":"EUROPA","name":"Cáucaso","left":62.5,"top":27,"icon":"double"},
            {"continent":"EUROPA","name":"Mont Blanc","left":52,"top":25,"icon":"single"},
            {"continent":"EUROPA","name":"Aneto","left":50,"top":26,"icon":"single"},
            {"continent":"EUROPA","name":"Elbrus","left":60.5,"top":26,"icon":"single"},
            {"continent":"EUROPA","name":"Balcanes","left":55.5,"top":24.5,"icon":"double"},
            {"continent":"EUROPA","name":"Gran Llanura Europea","left":56,"top":21},
            {"continent":"EUROPA","name":"Cabo de Finisterre","left":46.5,"top":24.5},
            {"continent":"OCEANÍA","name":"Gran Cordillera Divisoria","left":91,"top":67,"icon":"double"},
            {"continent":"OCEANÍA","name":"Alpes del Sur","left":97,"top":73,"icon":"double"},
            {"continent":"OCEANÍA","name":"Gran Desierto de Arena","left":85,"top":60},
            {"continent":"OCEANÍA","name":"Gran Desierto Victoria","left":86,"top":65}
        ];

        const mapContainer = document.getElementById('map-container');
        const checkBtn = document.getElementById('check-btn');
        const resetBtn = document.getElementById('reset-btn');
        const scoreElement = document.getElementById('score');
        const draggableLabelsContainer = document.getElementById('draggable-labels');
        const tablesContainer = document.getElementById('tables-container');

        const numberedFeatures = dropzoneData.map((item, index) => ({
            ...item,
            number: index + 1
        }));
        const continentOrder = Array.from(new Set(numberedFeatures.map(f => f.continent)));

        let score = 0;
        let draggedLabel = null;
        let dropZones = [];
        let draggableLabels = [];

        function renderDropZones() {
            dropZones.forEach(zone => zone.remove());
            dropZones = [];

            numberedFeatures.forEach(feature => {
                const zone = document.createElement('div');
                zone.classList.add('drop-zone');
                zone.dataset.target = feature.name;
                zone.dataset.correctNumber = feature.number.toString();
                zone.style.left = feature.left + '%';
                zone.style.top = feature.top + '%';

                if (feature.icon === 'double' || feature.icon === 'single') {
                    zone.dataset.type = 'peak';
                    const icon = document.createElement('span');
                    icon.className = feature.icon === 'double' ? 'peak-icon-double' : 'peak-icon';
                    zone.appendChild(icon);
                }

                mapContainer.appendChild(zone);
                dropZones.push(zone);
            });
        }

        function generateLabels() {
            draggableLabelsContainer.innerHTML = '';
            for (let i = 1; i <= numberedFeatures.length; i++) {
                const label = document.createElement('div');
                label.classList.add('draggable-label');
                label.textContent = i;
                label.setAttribute('draggable', 'true');
                label.dataset.number = i;
                draggableLabelsContainer.appendChild(label);
            }
            return Array.from(draggableLabelsContainer.querySelectorAll('.draggable-label'));
        }

        function generateTables() {
            tablesContainer.innerHTML = '';
            continentOrder.forEach(continent => {
                const tableGroup = document.createElement('div');
                tableGroup.classList.add('continent-table');

                const continentFeatures = numberedFeatures.filter(f => f.continent === continent);
                let tableHTML = `<h3>${continent}</h3>`;
                tableHTML += '<table><tbody>';

                continentFeatures.forEach(feature => {
                    tableHTML += `<tr><td class="num">${feature.number}</td><td>${feature.name}</td></tr>`;
                });

                tableHTML += '</tbody></table>';
                tableGroup.innerHTML = tableHTML;
                tablesContainer.appendChild(tableGroup);
            });
        }

        function returnLabelToBank(number) {
            const originalLabel = draggableLabelsContainer.querySelector(`.draggable-label[data-number=\"${number}\"]`);
            if (originalLabel) {
                originalLabel.style.display = 'block';
                originalLabel.classList.remove('hidden');
            }
        }

        function attachLabelEvents(labels) {
            labels.forEach(label => {
                label.addEventListener('dragstart', (e) => {
                    draggedLabel = label;
                    e.dataTransfer.setData('text/plain', label.dataset.number);
                    setTimeout(() => label.classList.add('hidden'), 0);
                });

                label.addEventListener('dragend', () => {
                    if (draggedLabel && draggedLabel.classList.contains('hidden')) {
                        draggedLabel.classList.remove('hidden');
                        draggedLabel.style.display = 'block';
                    }
                    draggedLabel = null;
                });
            });
        }

        function attachDropZoneEvents() {
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('hover');
                });

                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('hover');
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('hover');

                    const droppedNumber = e.dataTransfer.getData('text/plain');
                    const existingLabel = zone.querySelector('.placed-label');

                    if (draggedLabel) {
                        if (existingLabel) {
                            const oldNumber = existingLabel.dataset.droppedNumber;
                            returnLabelToBank(oldNumber);
                            existingLabel.remove();
                        }

                        const placedLabel = document.createElement('div');
                        placedLabel.classList.add('placed-label');
                        placedLabel.textContent = droppedNumber;
                        placedLabel.dataset.droppedNumber = droppedNumber;

                        zone.appendChild(placedLabel);
                        draggedLabel.style.display = 'none';
                        draggedLabel.classList.remove('hidden');
                    }
                });
            });
        }

        function checkAnswers() {
            score = 0;
            const total = dropZones.length;

            dropZones.forEach(zone => {
                const placedLabel = zone.querySelector('.placed-label');
                zone.classList.remove('correct', 'incorrect');

                if (placedLabel) {
                    const droppedNumber = placedLabel.dataset.droppedNumber;
                    const correctNumber = zone.dataset.correctNumber;
                    const isCorrect = droppedNumber === correctNumber;

                    if (isCorrect) {
                        zone.classList.add('correct');
                        score++;
                    } else {
                        zone.classList.add('incorrect');
                    }
                }
            });
            scoreElement.textContent = score;
            alert(`¡Comprobación completa! Tu puntuación es: ${score}/${total}`);
        }

        function resetGame() {
            dropZones.forEach(zone => {
                zone.querySelectorAll('.placed-label').forEach(label => label.remove());
                zone.classList.remove('correct', 'incorrect');
            });

            draggableLabels = generateLabels();
            attachLabelEvents(draggableLabels);

            score = 0;
            scoreElement.textContent = score;
        }

        renderDropZones();
        draggableLabels = generateLabels();
        generateTables();
        attachLabelEvents(draggableLabels);
        attachDropZoneEvents();
        scoreElement.textContent = score;

        checkBtn.addEventListener('click', checkAnswers);
        resetBtn.addEventListener('click', resetGame);
    });
  </script>
</body>
</html>

